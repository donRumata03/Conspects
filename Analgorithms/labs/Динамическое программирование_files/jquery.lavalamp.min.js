(function(c){jQuery.fn.lavaLamp=function(a){function d(a){a=parseInt(a);return isNaN(a)?0:a}a=c.extend({target:"li",container:"",fx:"swing",speed:500,click:function(){return!0},startItem:"",includeMargins:!1,autoReturn:!0,returnDelay:0,setOnClick:!0,homeTop:0,homeLeft:0,homeWidth:0,homeHeight:0,returnHome:!1,autoResize:!1,selectClass:"selectedLava",homeClass:"homeLava",skipClass:"noLava",returnStart:function(){},returnFinish:function(){},hoverStart:function(){},hoverFinish:function(){}},a||{});""==
a.container&&(a.container=a.target);a.autoResize&&c(window).resize(function(){c(a.target+"."+a.selectClass).trigger("mouseenter")});return this.each(function(){function m(e,c){"return"==c?a.returnStart(e):a.hoverStart(e);e||(e=b);a.includeMargins||(h=d(e.css("marginLeft")),k=d(e.css("marginTop")));var g={left:e.position().left+h,top:e.position().top+k,width:e.outerWidth()-n,height:e.outerHeight()-p};f.stop().animate(g,a.speed,a.fx,function(){"return"==c?a.returnFinish(e):a.hoverFinish(e)})}"static"==
c(this).css("position")&&c(this).css("position","relative");if(a.homeTop||a.homeLeft){var q=c("<"+a.container+' class="'+a.homeClass+'"></'+a.container+">").css({left:a.homeLeft,top:a.homeTop,width:a.homeWidth,height:a.homeHeight,position:"absolute",display:"block"});c(this).prepend(q)}var w=location.pathname+location.search+location.hash,l=c(a.target,this).not("."+a.skipClass),g,n=0,p=0,t=0,u=0,h=0,k=0;var b=c(a.target+"."+a.selectClass,this);""!=a.startItem&&(b=l.eq(a.startItem));(a.homeTop||a.homeLeft)&&
1>b.length&&(b=q);if(1>b.length){var r=0,v;l.each(function(){var a=c("a:first",this).attr("href");-1<w.indexOf(a)&&a.length>r&&(v=c(this),r=a.length)});0<r&&(b=v)}1>b.length&&(b=l.eq(0));b=c(b.eq(0).addClass(a.selectClass));l.on("mouseenter focusin",function(){g&&(clearTimeout(g),g=null);m(c(this))}).click(function(e){a.setOnClick&&(b.removeClass(a.selectClass),b=c(this).addClass(a.selectClass));return a.click.apply(this,[e,this])});var f=c("<"+a.container+' class="backLava"><div class="leftLava"></div><div class="bottomLava"></div><div class="cornerLava"></div></'+
a.container+">").css({position:"absolute",display:"block",margin:0,padding:0}).prependTo(this);a.includeMargins&&(t=d(b.css("marginTop"))+d(b.css("marginBottom")),u=d(b.css("marginLeft"))+d(b.css("marginRight")));n=d(f.css("borderLeftWidth"))+d(f.css("borderRightWidth"))+d(f.css("paddingLeft"))+d(f.css("paddingRight"))-u;p=d(f.css("borderTopWidth"))+d(f.css("borderBottomWidth"))+d(f.css("paddingTop"))+d(f.css("paddingBottom"))-t;a.homeTop||a.homeLeft?f.css({left:a.homeLeft,top:a.homeTop,width:a.homeWidth,
height:a.homeHeight}):(a.includeMargins||(h=d(b.css("marginLeft")),k=d(b.css("marginTop"))),f.css({left:b.position().left+h,top:b.position().top+k,width:b.outerWidth()-n,height:b.outerHeight()-p}));c(this).on("mouseleave focusout",function(){var b=null;if(a.returnHome)b=q;else if(!a.autoReturn)return!0;a.returnDelay?(g&&clearTimeout(g),g=setTimeout(function(){m(b,"return")},a.returnDelay)):m(b,"return");return!0})})}})(jQuery);
